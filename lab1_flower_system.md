# Лабораторна робота 1: Інформаційна система для компанії з вирощування та продажу квітів

## Користувачі інформаційної системи та їх задачі

| **Задача** | **Вхідна інформація** | **Вихідна інформація** |
| --- | --- | --- |
| **Адміністратор** | | |
| Управління правами доступу | Дані про користувачів, ролі, рівні доступу | Оновлені права доступу |
| Моніторинг роботи БД | Логи системи, показники продуктивності | Звіти про стан системи |
| Резервне копіювання | База даних | Резервна копія даних |
| **Менеджер** | | |
| Ведення замовлень | Дані про клієнта, список квітів, кількість | Оформлене замовлення |
| Оновлення асортименту | Інформація про нові квіти, зміни в наявності | Оновлений каталог квітів |
| Управління цінами | Собівартість, ринкові ціни, сезонність | Оновлений прайс-лист |
| **Клієнт** | | |
| Перегляд асортименту | Фільтри пошуку (вид, ціна, колір) | Список доступних квітів |
| Створення замовлення | Вибрані квіти, контактні дані | Підтвердження замовлення |
| Перевірка статусу | Номер замовлення | Інформація про стан замовлення |
| **Агроном** | | |
| Оновлення стану рослин | Результати огляду, параметри росту | Оновлена інформація про стан |
| Планування посадок | Площі, сезонність, попит | План посадок |

---

## Сутності та їх атрибути

_(Опис таблиць з первинними та зовнішніми ключами зазначено у SQL-розділі нижче.)_

---

## Формалізація зв’язків між сутностями

- Один **клієнт** може створити багато **замовлень** (1:N).
- Один **менеджер** може обслуговувати багато **замовлень** (1:N).
- Одне **замовлення** може містити багато **деталей замовлення**, кожна з яких пов'язана з конкретною **квіткою** (1:N).
- **Квітка** може бути посаджена кілька разів (**Посадка**), кожна з яких виконується **агрономом** (1:N).
- **Квітка** має одного **постачальника** (N:1).
- **Оплата** та **доставка** відносяться до одного **замовлення** (1:1).

---

## Зв’язки між таблицями (опис у форматі ER)

| Таблиця 1 | Таблиця 2 | Тип зв’язку | Поле-зв’язок |
|----------|------------|-------------|---------------|
| Користувач | Замовлення | 1:N | клієнт_id, менеджер_id |
| Замовлення | Деталі_замовлення | 1:N | замовлення_id |
| Квітка | Деталі_замовлення | 1:N | квітка_id |
| Квітка | Посадка | 1:N | квітка_id |
| Користувач | Посадка | 1:N | агроном_id |
| Квітка | Постачальник | N:1 | постачальник_id |
| Замовлення | Оплата | 1:1 | замовлення_id |
| Замовлення | Доставка | 1:1 | замовлення_id |

---

## Нормалізація таблиць бази даних

1. **Перша нормальна форма (1НФ)**: усі таблиці не містять повторюваних груп, кожне поле має атомарне значення.
2. **Друга нормальна форма (2НФ)**: усі неключові атрибути залежать від усього первинного ключа. Наприклад, `Деталі_замовлення` — залежить від `замовлення_id` і `квітка_id`.
3. **Третя нормальна форма (3НФ)**: усі неключові атрибути не залежать транзитивно від первинного ключа. Наприклад, ціна квітки не зберігається в таблиці `Замовлення`, а лише в `Квітка`.

---

## Діаграма бази даних

![Діаграма](<Screenshot 2025-04-08 at 14.36.00 ER Diagram.png>)

---

## SQL-код створення бази даних

```sql
CREATE TABLE Користувач (
    id SERIAL PRIMARY KEY,
    ім_я VARCHAR(100) NOT NULL,
    роль VARCHAR(50) NOT NULL,
    телефон VARCHAR(20),
    email VARCHAR(100) UNIQUE,
    адреса TEXT,
    досвід INTEGER
);

CREATE TABLE Постачальник (
    id SERIAL PRIMARY KEY,
    назва_компанії VARCHAR(100) NOT NULL,
    контактна_особа VARCHAR(100),
    телефон VARCHAR(20),
    email VARCHAR(100)
);

CREATE TABLE Квітка (
    id SERIAL PRIMARY KEY,
    назва VARCHAR(100) NOT NULL,
    тип VARCHAR(50),
    колір VARCHAR(30),
    ціна NUMERIC(10,2),
    кількість INTEGER,
    опис TEXT,
    статус VARCHAR(50),
    постачальник_id INTEGER REFERENCES Постачальник(id)
);

CREATE TABLE Замовлення (
    id SERIAL PRIMARY KEY,
    дата DATE NOT NULL,
    статус VARCHAR(50),
    клієнт_id INTEGER REFERENCES Користувач(id),
    менеджер_id INTEGER REFERENCES Користувач(id),
    сума NUMERIC(10,2)
);

CREATE TABLE Деталі_замовлення (
    id SERIAL PRIMARY KEY,
    замовлення_id INTEGER REFERENCES Замовлення(id),
    квітка_id INTEGER REFERENCES Квітка(id),
    кількість INTEGER,
    ціна_за_одиницю NUMERIC(10,2)
);

CREATE TABLE Посадка (
    id SERIAL PRIMARY KEY,
    квітка_id INTEGER REFERENCES Квітка(id),
    агроном_id INTEGER REFERENCES Користувач(id),
    дата_посадки DATE,
    очікувана_дата_зрізу DATE,
    статус VARCHAR(50)
);

CREATE TABLE Оплата (
    id SERIAL PRIMARY KEY,
    замовлення_id INTEGER REFERENCES Замовлення(id),
    метод VARCHAR(50),
    статус VARCHAR(50),
    сума NUMERIC(10,2)
);

CREATE TABLE Доставка (
    id SERIAL PRIMARY KEY,
    замовлення_id INTEGER REFERENCES Замовлення(id),
    метод VARCHAR(50),
    статус VARCHAR(50),
    трекинг VARCHAR(100)
);
```

---